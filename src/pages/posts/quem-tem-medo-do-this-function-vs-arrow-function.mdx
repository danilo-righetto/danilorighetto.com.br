import { Video, Link, ArticleLayout } from '@src/components/content'

export const meta = {
  author: 'Mario Souto',
  date: '2023-05-03',
  title: '#drops Quem tem medo do this? Function vs Arrow Functions no JavaScript',
  description: 'Voc√™ sabe uma das principais diferen√ßas de usar function vs arrow function no seu c√≥digo?',
  source: 'devsoutinho',
  category: 'post',
  tags: ['threads', 'javascript', 'programa√ß√£o'],
  comments: true,
}

export default (props) => <ArticleLayout meta={meta} {...props} />

Voc√™ sabe uma das principais diferen√ßas de usar function vs arrow function no seu c√≥digo?

Olhando esse c√≥digo? quais s√£o os valores de `this` em ordem do counter?

```js
let counter = 0;
console.log(++counter, "[solto] this", this);

function MyFunction() {
	console.log(++counter, "[function] this", this);
}
MyFunction();
new MyFunction();

const MyArrowFunction = () => {
	console.log(++counter, "[arrow_function] this", this);
}
MyArrowFunction();

const myCustomObject = {
	MyFunction,
	MyArrowFunction,
};
myCustomObject.MyFunction();
myCustomObject.MyArrowFunction();
```

1. O primeiro console log `"[solto] this"`, vai referenciar o window, se voc√™ estiver rodando na web e o global se voc√™ estiver no Node. Importante refor√ßar que hoje em dia, tamb√©m temos o globalThis que permite que seu c√≥digo acesse o escopo global independente do ambiente em que ele esteja rodando.

https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/globalThis

2. O segundo √© o this dentro de uma function. Por padr√£o o this dentro de uma function vai referenciar **o escopo de onde ela est√° sendo executada**, neste caso, ela vai ser executada no escopo global, por consequencia √© o mesmo this do item anterior.

3. No terceiro caso, estamos usando nossa fun√ß√£o para instanciar um novo objeto. Dito isso, o objeto em quest√£o vai ser o this da nossa inst√¢ncia nessa fun√ß√£o. Ou seja, o this vai ser o objeto que estamos instanciando.

4. No quarto caso, estamos usando uma arrow function. A arrow function n√£o tem um this pr√≥prio, **ela vai herdar o this do escopo onde ela est√° sendo criada**. Neste caso, o escopo √© o global, ent√£o o this vai ser o mesmo do primeiro caso.

5. Neste caso, estamos criando um novo objeto e adicionando nossa fun√ß√£o criada com `function` nele. O resultado da execu√ß√£o vai ser o mesmo do segundo caso, pois o this vai ser o mesmo do escopo onde a fun√ß√£o est√° sendo executada, que √© o nosso objeto literal `myCustomObject`.

6. No sexto caso, estamos criando um novo objeto e adicionando nossa fun√ß√£o criada com `arrow function` dentro dele. O resultado da execu√ß√£o vai ser o mesmo do primeiro caso, pois o this vai ser o mesmo do escopo onde a fun√ß√£o est√° sendo criada, que √© o objeto global do browser.

> Ahh e antes que voc√™ pergunte, tentar usar new em uma arrow function ir√° resultar em `Uncaught TypeError: MyArrowFunction is not a constructor`

<iframe
  height="300"
  width="100%"
  scrolling="no"
  title="Exemplo de c√≥digo"
  src="https://codepen.io/omariosouto/embed/XWxzKdO?default-tab=js%2Cresult&editable=true"
  frameBorder="no"
  loading="lazy"
  allowtransparency={true.toString()}
  allowFullScreen={true}
/>

> TLDR; O this de uma fun√ß√£o criada com `function` vai ser o escopo onde ela est√° sendo executada, j√° o this de uma arrow function vai ser o escopo onde ela est√° sendo criada.

E como sempre, fica aqui as refer√™ncias para voc√™ se aprofundar no assunto:

- [this - MDN](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Operators/this)
- [arrow function - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)
- [function - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)

Continue acompanhando o blog para mais dicas de desenvolvimento em geral! üòç

Ahh e me segue no YouTube!

https://www.youtube.com/@DevSoutinho